<h2 class="text-xl font-semibold text-gray-900 mb-4">
    Nodes
    <span class="text-base font-normal text-gray-500">
        ({{ device_count }} total)
    </span>
</h2>

{% if device_count > 0 %}
<div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Name
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Model
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Type
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    State
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Management IP
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Disks
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions
                </th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for device in devices %}
            <tr class="hover:bg-gray-50 transition-colors">
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                    {{ device.name }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-mono">
                    {{ device.model }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-mono">
                    {{ device.kind }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    {% if device.state.to_string() == "running" %}
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        Running
                    </span>
                    {% elif device.state.to_string() == "created" || device.state.to_string() == "starting" %}
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                        {{ device.state.to_string()|capitalize }}
                    </span>
                    {% elif device.state.to_string() == "failed" %}
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                        Failed
                    </span>
                    {% else %}
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                        {{ device.state.to_string()|capitalize }}
                    </span>
                    {% endif %}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-mono">
                    {% if device.mgmt_ipv4 != "" %}{{ device.mgmt_ipv4 }}{% else %}-{% endif %}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                    {% if device.disks.is_empty() %}-{% else %}âœ“{% endif %}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm space-x-2">
                    {% if device.state.to_string() == "running" %}
                    <button disabled title="Coming Soon" class="px-3 py-1 text-xs font-medium text-white bg-red-600 rounded opacity-50 cursor-not-allowed">
                        Stop
                    </button>
                    <button disabled title="Coming Soon" class="px-3 py-1 text-xs font-medium text-white bg-blue-600 rounded opacity-50 cursor-not-allowed">
                        Console
                    </button>
                    {% else %}
                    <button disabled title="Coming Soon" class="px-3 py-1 text-xs font-medium text-white bg-green-600 rounded opacity-50 cursor-not-allowed">
                        Start
                    </button>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p class="text-center text-gray-500 py-8 italic">No devices configured in this lab.</p>
{% endif %}
